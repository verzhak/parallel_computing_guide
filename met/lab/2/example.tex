
В качестве демонстрационного примера рассмотрим моделирование гамма - распределения (распределения Эрланга) с помощью датчика псевдослучайных чисел, равномерно распределенных на диапазоне $[0 ;~ 1)$.

Плотность гамма - распределения вычисляется по формуле \eqref{gamma:distrib}.
\begin{gather}
	\label{gamma:distrib}
	f(x) = \left\{
	\begin{aligned}
		\frac{1}{\beta^\alpha \Gamma(\alpha)} & e^{- x / \beta} x^{\alpha - 1}, & ~ \text{если} & ~ x \ge 0 \\
		& 0, & ~ \text{если} & ~ x < 0
	\end{aligned}
	\right. \\
	\alpha, \beta \in \mathbb{R} \notag
\end{gather}

В формуле \eqref{gamma:distrib} функция $\Gamma(t)$ суть гамма - функция, вычисляемая по формуле \eqref{gamma:func}.

Математическое ожидание случайной величины с гамма - распределением равно $\alpha \beta$. Дисперсия случайной величины с гамма - распределением равна $\alpha \beta^2$.

Для упрощения расчетов выберем $\alpha \in \mathbb{N}$.

Генерирование реализации псевдослучайной величины с гамма - распределением происходит в два шага:

\begin{enumerate}

	\item Генерирование $\alpha$ реализаций псевдослучайной величины с показательным распределением.

		Генерирование реализации $\xi$ псевдослучайной величины с показательным распределением происходит по формуле \eqref{exp-distrib-in-gamma}.
		\begin{gather}
			\xi = - \beta \ln(\theta) \label{exp-distrib-in-gamma}
		\end{gather}

		Здесь $\theta$ реализация случайной величины с равномерным распределением на диапазоне $[0 ;~ 1]$ (в рассматриваемом примере - на диапазоне $[0 ;~ 1)$);
	
	\item Генерирование реализации псевдослучайной величины с гамма - распределением.

		Реализация псевдослучайной величины с гамма - распределением вычисляется как сумма реализаций псевдослучайной величины с показательным распределением, вычисленных на предыдущем шаге.

\end{enumerate}

Исходный код демонстрационной программы приведен в листинге \ref{listing:openmpi:src}.

Рисунком \ref{image:openmpi:build} проиллюстрирован процесс сборки демонстрационной программы. На рисунках \ref{image:openmpi:demo:1:res}, \ref{image:openmpi:demo:2:res} и \ref{image:openmpi:demo:3:res} приведены результаты вычислений, выполненных двумя, четырьмя и восемью вычислительными потоками соответственно. На рисунках \ref{image:openmpi:demo:1:htop}, \ref{image:openmpi:demo:2:htop} и \ref{image:openmpi:demo:3:htop} приведен вывод утилиты htop, запущенной на удаленной вычислительной системе в моменты выполнения вычислений - отчетливо видно, что отдельные части поставленного задания на удаленной вычислительной системе выполняются, соответственно, одним, двумя и четыремя вычислительными потоками.

%\mysource{../src/demo_2/openmpi/main.c}{openmpi:src}{Исходный код демонстрационной программы} % TODO раскомментировать

\mimage{openmpi:build}{100}{Сборка демонстрационной программы}{}

\newcommand{\openmpiex}[5]
{
	\begin{landscape}

		\mimage{openmpi:demo:#1:res}{#3}{Результат вычислений, выполненных #2 вычислительными потоками}{height=0.43\textheight}
	
		\begin{figure}[H]

			\refstepcounter{figure}
			\label{image:openmpi:demo:#1:htop}

			\begin{multicols}{2}

				\includegraphics[height=0.34\textheight]{image/n#4.png}
				\includegraphics[height=0.34\textheight]{image/n#5.png}

			\end{multicols}

			\begin{center}

				{\noindent \small Рисунок~\thefigure~-~Вывод утилиты htop, запущенной на удаленной вычислительной системе, в момент выполнения вычислений #2 вычислительными потоками}

			\end{center}

		\end{figure}

	\end{landscape}
}

\openmpiex{1}{двумя}{101}{1}{4}
\openmpiex{2}{четырьмя}{103}{2}{3}
\openmpiex{3}{восемью}{104}{2}{5}

